{{ extend 'layout.html' }}
<link rel="stylesheet" href="/static/prisoner/css/styles.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="/static/genova/css/style.css" type="text/css" media="screen"/>
<script type="text/javascript" src="/static/prisoner/jquery.tooltip.min.js"></script>
<script type="text/javascript" src="/static/prisoner/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="/static/prisoner/jquery.tooltip.min.js"></script>
<link rel="stylesheet" href="/static/prisoner/css/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="/static/prisoner/jquery.fancybox.pack.js?v=2.1.5"></script>
<link rel="stylesheet" href="/static/prisoner/css/training.css" type="text/css" media="screen"/>

<link rel="stylesheet" href="/static/prisoner/css/stats-box.css" type="text/css" media="screen"/>
<script type="text/javascript" src="/static/prisoner/stats-box.js"></script>

{{ bonus_time = 30 }}
<!-- PHOTOS DOWNLOADED FROM OPENPHOTO.NET --> 
<div id="shadow" style="display: none;">
 <h2>Training Guidelines for Image Tagging</h2>
 <p>
	When you tag a photo, you assign it a keyword or phrase for simplified searching and classification. 
    <div style="width: 45%; float: left;  max-width: 350px; margin: 0 10px;" class="column1">  
    <img src="/static/genova/autumn.jpg" width="275" height="200" border="0">
    <p><em>This photo could be tagged with "Nature" to describe the scene or "Autumn" to describe the
	time period.</em></p><br>
    <img src="/static/genova/pollination.jpg" width="275" height="200">
    <p><em>This photo could be tagged with "Pollination" to describe the story or activity or
	with "flower" to describe the main object in the forefront.</em></p><br><br>
    <p><strong>Definition:</strong> 'Abstract' photography is usually opposed to 'representational' or 'figurative' 
	in art. You might say that an 'abstract' image only represents its own form, and that form might 
	in some way 'represent' some larger concept (e.g., in the way that Malevich's _Tumbling Cube_ might 
	be said to represent 'instability'), but it doesn't represent an object (like, say, the Eiffel Tower). 
    </p>
    </div>
    
    <div style="width: 45%; float: left; max-width: 350px; margin: 0 10px;" class="column2">
    <ul>
      <li>If a photo is in a stockpile of millions of other photos it is important to 
	add tags that describe it well. There are several ways how you can describe photo.
	It is important to capture the following different dimensions of the image rather
	than use a lot of tags describing this one category.
      <li><strong>Forefront tags - </strong> Some photos have main actors in the forefront of the
	image (e. g. the bear in the photo on the left). Tags can identify this aspect of the
	image.
      <li><strong>Background (scenery) tags - </strong> Tags can describe the background of the image.
	Is there landscape? Is it a picture of a city? Is there sea or mountains?
      <li><strong>Time tags - </strong>
        Is there any time information that can be deduced from the picture? If it is black and white may
	be the picture is old. Clothes that people wear on the picture can tell you if the picture 
	was shot in the 90s or 80s. Does the pictures describe recent news events? Alternatively,
	is the picture shot during the day or night, sunrise or sunset?
      <li><strong>Technique - </strong> is it a macro photo (very small and/or close-up objects)?
	Is it a portrait? Is it an abstract photography? Is it a journalistic photography? A documentary
	photography? An action photography?
      <li><strong>Quality - </strong> Does it look like the photo has been taken by a professional
	or amateur? What is the resolution quality of the picture? Is it a web photo or a photo
	that can be printed in high quality?
      <li><strong>Story (activity) - </strong> A picture might have a story. Is there a bear looking out
	for its prey? Is there a flower being pollinated? These would be usually best described
	by an action verb.
    </ul>
    </div>
                  <br><br><br>
    <h2>Testing Your Understanding of the Guidelines</h2>
   <div style="width: 45%; float: left;  max-width: 350px; margin: 0 10px;" class="column1">  
    <img style="margin-bottom: 60px; margin-top: 25px;" src="/static/genova/geese.jpg" width="275" height="200" border="0">
    <div {{ = "class=bonus" if not training else "" }}>
    <img style="margin-bottom: 60px; margin-top: 10px;" src="/static/genova/water.jpg" width="275" height="200">
    <img style="margin-bottom: 60px; margin-top: 0px;" src="/static/genova/bizarre.jpg" width="275" height="200"></div>
    </div>
    
    <div style="width: 45%; float: left; max-width: 350px; margin: 0 10px;" class="column2">
    <form>
    <p>Imagine this picture has already the following four tags: "geese", "eating", "highres", "grass". 
       Which one of the following tags would most worthwhile to add in a sense that the dimension
       it describes has not been described by the previous tags?</p>
            <ul>
              <li>animals</li>
              <li>meadow</li>
              <li>close-up</li>
              <li>couple</li>
              <li>highdef</li>
            </ul>
            Your answer: <input style="position: relative; left: 25px;" type="text" id="par1" name="article1">
    </p>  
    <div {{ = "class=bonus" if not training else "" }}>
    <p>Assume there are already the following tags describing the picture to the 
	left: "bottle", "blue", "spill", and "highdef". Which one of the following
	tags is the most redundant?</p>
            <ul>
              <li>modern
              <li>new
              <li>close-up
              <li>portrait
              <li>water
            </ul>
            Your answer: <input style="position: relative; left: 25px;" {{ = "value=water" if not training else "" }} type="text" id="par2" name="article2">
    </p>   
    <p>Which one of the following tags describes a story rather than some
	other dimension about the image?</p>
            <ul>
              <li>rain
              <li>woman
              <li>cat
              <li>danger
              <li>bizarre
            </ul>
            Your answer: <input style="position: relative; left: 25px;" {{ = "value=danger" if not training else "" }} type="text" id="par3" name="article3">
    </p>
    </div>   
    <button id="butt" style="margin-left: 20px; padding: 5px;">Submit Answers</button>
    <button class="leave_training" style="margin-left: 20px; padding: 5px;">Quit Training</button>
    </form>
    </div>
    
</div>
<div class="congrats">
<h1>Congratulations!</h1>
<p>You have successfully completed the training</p>
<button class="leave_training" style="margin-left: 70px; padding: 5px;">Go Back to the Task</button>
</div>
<h1>Image Tagging</h1>
{{ task = """These pictures may contain illicit, disagreeable content (explicit sexual
    content, violence, racism etc.) """ }} 

<div style="position: absolute; left: 410px;">
  <h3 style="margin-bottom: 3px;">Payment Details</h3>
  <div class="stats">
    <div class="tab selected">
      <div class="stat">{{=request.price_string}}</div> Per HIT
        <span class="details">
		 This job pays {{=request.price_string}} per letter via
		 bonus. <br><br>You can find
		 bonus payments in <i>Your Account-&gt;Account
		 Settings-&gt;<br>-&gt;View your account balance and
		 transaction history</i>.
	 </span>
       </div>
       <div class="tab">
         <div class="stat">{{= improbability_rate }}%</div> Approved
	   <span class="details">
		 <p>Your submitted keywords must pass an evaluation. You will be
		 notified of your work's approval within {{=bonus_time}}
		 minutes.</p>
		 <p>To ensure that our clients are best served, we require you
		 to go through <a class="training" href="#training">image tagging training</a> 
		 before you can begin work on this task.</p>
           </span>
	 </div>
	<div class="tab">
	  <div class="stat">{{=work_limit}}</div> Available
	    <span class="details">
		Today you can tag {{=work_limit}} images. This will
		change tomorrow, depending upon our client's needs.
            </span>
	  </div>
          <div id="details_box"></div> 
	</div>
  </div>
</div>

<div style="max-width: 325px;" class="taskdetails">
<p>

You will be presented with a series of pictures. Provide 5 keywords most
appropriately describing the content of these pictures.
    {{ = task }}
</p>
</div>


<h2>Image</h2>
<img style="max-width: 275px;" src={{ = pic.url }}>
<!-- FROM http://www.morguefile.com/archive -->
<h2>Submit your Keywords</h2>
<form action id="response" method="POST">
<p>
Keyword 1: <input disabled="disabled" type="text" id="keyword1"><br>
Keyword 2: <input disabled="disabled" type="text" id="keyword2"><br>
Keyword 3: <input disabled="disabled" type="text" id="keyword3"><br>
Keyword 4: <input disabled="disabled" type="text" id="keyword4"><br>
Keyword 5: <input disabled="disabled" type="text" id="keyword5"><br>
</p>
<input id="submit" type="submit" disabled="true" style="min-width: 70px; font-size: 16px; margin: 10px 0;" />
</form>


<script>

params = {
    track: true,
    delay: 0, 
    showURL: false, 
    showBody: " - ", 
    fade: 150,
    fixPNG: true, 
    opacity: 1, 
    left: -120,
     top: 9
};
$('.bonus').tooltip(params);
delete params.left
delete params.top
$('.crime').tooltip(params);

//######## Keywords for the actual task and the behavior of the Submit button of the 
//######## actual task

    
    
$('form input:text').change(function(){
	re1 = $('input[id=keyword1]').val();
	re2 = $('input[id=keyword2]').val();
	re3 = $('input[id=keyword3]').val();
	re4 = $('input[id=keyword4]').val();
	re5 = $('input[id=keyword5]').val();

	if(re1 != '' & re2 != '' & re3 != '' & re4 != '' & re5 != '')
	{
		$("input[type=submit]").removeAttr('disabled');
	}
      });
     
 
function show_training() {
    scrollTo(0,0);
    jQuery('#shadow').fadeIn()
      .find('button').click(function(e) {
            e.preventDefault();
            value1 = $('input[id=par1]').val();
            value2 = $('input[id=par2]').val();
            value3 = $('input[id=par3]').val();

        if(value1 == 'close-up' & value2 == 'water' & value3 == 'danger')
        {
            $('form input:text').prop("disabled", false);
            $('#shadow').fadeOut();
   	    $('.congrats').fadeIn();
            window.scroll(0,0);
        }
    });
}
function hide_training() {
	$('#shadow').fadeOut();
	$('.congrats').fadeOut();
}
    $(".training").bind('click', show_training);
    $('.leave_training').bind('click', hide_training);    


$("#par1").on("change", function() {
	var explanations = {};
	explanations[0] = "The answer you have entered is not among the possible options."
	explanations[1] = "There is already a tag 'animals' which describes objects in the forefront. Hence this tag is redundant.";
	explanations[2] = "There is already a tag 'grass' which describes the scenery of the image. Hence this tag is redundant.";
	explanations[4] = "This is another tag describing the objects in the forefront like the 'geese' already used. Hence redundant.";
	explanations[5] = "This is essentially synonymous to highres, hence redundant.";
	jQuery('#err').remove();
	var matches = this.value;
	if(!(this.value=="close-up"))
	{
		var feasible_answers = new Array("animals", "meadow", "close-up", "couple", "highdef");
		$('#par1').after('<div id="err">Your answer is incorrect! (Hint: ' + explanations[(jQuery.inArray(matches, feasible_answers)+1)] + ')</div>');
	}
	else
	{
		$('#par1').after('<div id="cor">Well done!</div>');
	}
});


$("#par2").on("change", function() {
	var explanations = {};
	explanations[0] = "The answer you have entered is not among the possible options."
	explanations[1] = "The tag 'modern' refers to time as outlined in the guidelines. None of the tags already assigned refer to this aspect of the image.";
	explanations[2] = "The tag 'new' refers to time as outlined in the guidelines. None of the tags already assigned refer to this aspect of the image.";
	explanations[3] = "The tag 'close-up' refers to the technique as explained in the guidelines. None of the tags already assigned refer to this aspect.";
	explanations[4] = "The tag 'portrait' belongs into the 'technique' category as explained in the guidelines. This aspect has been missing.";
	jQuery('#err').remove();
	var matches = this.value;
	if(!(this.value=="water"))
	{
		var feasible_answers = new Array("modern", "new", "close-up", "portrait", "water");
		$('#par2').after('<div id="err">Your answer is incorrect! (Hint: ' + explanations[(jQuery.inArray(matches, feasible_answers)+1)] + ')</div>');
	}
	else
	{
		$('#par2').after('<div id="cor">Well done!</div>');
	}
});


$("#par3").on("change", function() {
	var explanations = {};
	explanations[0] = "The answer you have entered is not among the possible options."
	explanations[1] = "The tag 'rain' is a description of a background rather than telling the main story in the picture.";
	explanations[2] = "The tag 'woman' describes an object rather than an activity, action or a story.";
	explanations[3] = "The tag 'cat' describes an object rather than an activity, action or a story.";
	explanations[5] = "The tag 'bizarre' describes an overall impression without describing a story.";
	jQuery('#err').remove();
	var matches = this.value;
	if(!(this.value=="danger"))
	{
		var feasible_answers = new Array("rain", "woman", "cat", "danger", "bizarre");
		$('#par3').after('<div id="err">Your answer is incorrect! (Hint: ' + explanations[(jQuery.inArray(matches, feasible_answers)+1)] + ')</div>');
	}
	else
	{
		$('#par3').after('<div id="cor">Well done!</div>');
	}
});

$(document).on('click', 'a.training', show_training);    
</script>
